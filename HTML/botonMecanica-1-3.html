<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Prueba Dinámica - Rotación de Cuerpo Rígido</title>
    <link rel="stylesheet" href="../CSS/botones.css">
    <script src="../JS/utilidades.js"></script>
    <script src="../JS/auth.js"></script>
    <script src="../JS/icono.js"></script>
    <style>
        .pregunta {
            margin-bottom: 40px;
            text-align: left;
        }
    </style>
</head>

<body>
    <div class="cont-volver">
        <button onclick="history.back()" id="btn-volver" class="btn-volver">&larr;</button>
    </div>
    <div class="contenedor">

        <form class="cuestionario">
            <h2>Prueba de Velocidad Angular - Selección Única</h2>

            <!-- Pregunta 1 -->
            <div class="pregunta">
                <p>1. La velocidad angular se mide en unidades de:</p>
                <hr>
                <div class="opciones">
                    <label><input type="radio" name="p1" value="A"> A) metros por segundo</label>
                    <label><input type="radio" name="p1" value="B"> B) radianes por segundo</label>
                    <label><input type="radio" name="p1" value="C"> C) newtons</label>
                    <label><input type="radio" name="p1" value="D"> D) grados</label>
                </div>
            </div>

            <!-- Pregunta 2 -->
            <div class="pregunta">
                <p>2. ¿Qué representa la frecuencia en un movimiento circular uniforme?</p>
                <hr>
                <div class="opciones">
                    <label><input type="radio" name="p2" value="A"> A) El número de vueltas por segundo</label>
                    <label><input type="radio" name="p2" value="B"> B) La distancia recorrida en un segundo</label>
                    <label><input type="radio" name="p2" value="C"> C) La aceleración tangencial</label>
                    <label><input type="radio" name="p2" value="D"> D) La masa del cuerpo en rotación</label>
                </div>
            </div>

            <!-- Pregunta 3 -->
            <div class="pregunta">
                <p>3. ¿Cuál es la relación correcta entre frecuencia (f) y velocidad angular (&omega;)?</p>
                <hr>
                <div class="opciones">
                    <label><input type="radio" name="p3" value="A"> A) &omega; = f / 2&pi;</label>
                    <label><input type="radio" name="p3" value="B"> B) &omega; = 2&pi;f</label>
                    <label><input type="radio" name="p3" value="C"> C) &omega; = f²</label>
                    <label><input type="radio" name="p3" value="D"> D) &omega; = 1/f</label>
                </div>
            </div>

            <!-- Pregunta 4 -->
            <div class="pregunta">
                <p>4. Si un objeto completa 5 vueltas en 2 segundos, su velocidad angular es:</p>
                <hr>
                <div class="opciones">
                    <label><input type="radio" name="p4" value="A"> A) 5 rad/s</label>
                    <label><input type="radio" name="p4" value="B"> B) 2.5 rad/s</label>
                    <label><input type="radio" name="p4" value="C"> C) 10&pi; rad/s</label>
                    <label><input type="radio" name="p4" value="D"> D) 5&pi; rad/s</label>
                </div>
            </div>

            <!-- Pregunta 5 -->
            <div class="pregunta">
                <p>5. ¿Cuál de las siguientes fórmulas es correcta para calcular la velocidad lineal a partir de la
                    velocidad angular?</p>
                <hr>
                <div class="opciones">
                    <label><input type="radio" name="p5" value="A"> A) v = r / &omega;</label>
                    <label><input type="radio" name="p5" value="B"> B) v = &omega; / r</label>
                    <label><input type="radio" name="p5" value="C"> C) v = &omega; &times; r</label>
                    <label><input type="radio" name="p5" value="D"> D) v = &omega; + r</label>
                </div>
            </div>
        </form>
    </div>

    <!-- Botón enviar -->
    <div class="boton">
        <button type="submit">Enviar</button>
    </div>
    </form>
    </div>
    <!-- Modal -->
    <div id="modal-mensaje" class="modal">
        <div class="modal-contenido">
            <p>¡Gracias por completar el examen!<br>Tus respuestas han sido enviadas.</p>
            <button class="modal-boton" onclick="cerrarModal()">Aceptar</button>
        </div>
    </div>

    <script>
        insertarLogo(); // tu función JS
        checkSession(true)
        const respuestasCorrectas = {
            p1: "B",
            p2: "C",
            p3: "C",
            p4: "B",
            p5: "C",
        };

        document.getElementById("formulario-quiz").addEventListener("submit", function (e) {
            e.preventDefault();

            const sesion = checkSession(true);
            if (!sesion || sesion.length === 0) {
                alert("No hay sesión activa");
                return;
            }

            const userName = sesion[0].userName || sesion[0].correo;

            for (let i = 1; i <= 5; i++) {
                const opciones = document.getElementsByName(`p${i}`);
                const respondida = Array.from(opciones).some((op) => op.checked);
                if (!respondida) {
                    alert(`Por favor responde la pregunta ${i}.`);
                    return;
                }
            }

            let correctas = 0;
            const total = Object.keys(respuestasCorrectas).length;

            for (let clave in respuestasCorrectas) {
                const seleccion = document.querySelector(
                    `input[name="${clave}"]:checked`
                );
                if (seleccion && seleccion.value === respuestasCorrectas[clave]) {
                    correctas++;
                }
            }

            localStorage.setItem(
                `${userName}_nivel 1.3`,//_nivel 1.3 debe cambiarse dependiedo al nivel
                JSON.stringify({
                    completado: true,
                    correctas,
                    total,
                })
            );

            document.getElementById(
                "texto-modal"
            ).innerHTML = `¡Gracias por completar el examen!<br>Resultado: ${correctas}/${total}`;
            document.getElementById("modal-mensaje").style.display = "flex";
        });

        function reintentar() {
            const sesion = checkSession(true);
            if (!sesion || sesion.length === 0) return;

            const userName = sesion[0].userName || sesion[0].correo;

            for (let i = 1; i <= 5; i++) {
                const opciones = document.getElementsByName(`p${i}`);
                opciones.forEach((op) => (op.checked = false));
            }

            localStorage.removeItem(`${userName}_nivel 1.3`);//_nivel 1.3 debe cambiarse dependiedo al nivel
            document.getElementById("modal-mensaje").style.display = "none";
        }

    </script>

    <script src="../JS/modal.js"></script><!--Importacion del script para funcionamiento de la ventana modal-->
</body>

</html>